# 格式化文本

> 原文:[https://www.javatpoint.com/matlab-formatting-text](https://www.javatpoint.com/matlab-formatting-text)

数据以数组的形式保存。当我们显示数据时，它是以数组的形式出现的，这可能不像往常那样具有代表性。因此，在 MATLAB 中有一些格式化操作符可以将数据转换成文本，并按照我们的要求格式化输出。

*   格式化运算符控制输出的符号、对齐和有效数字。
*   我们可以在格式说明符中将格式运算符与普通文本和特殊字符组合在一起。
*   格式化运算符可以与函数一起使用:compose、num2str、sprintf、fprintf、assert、error、warning 和 MException。

### 示例:

```

>> % create a row vector using rand function
>> r = rand(1,3);
>> % combining normal text, special character, formatting operator in the output
>> t = sprintf('Displaying 3 random numbers: \n 1)%f \n 2)%.2f \n 3)%12f',r);

```

**输出:**

```
>> t

t =
  'Displaying 3 random numbers: 
      1)0.957167 
      2)0.49 
      3)0.800280'

```

## MATLAB 中格式化运算符的字段

%符号始终位于格式运算符的前面。格式化运算符最多可以有六个字段-转换字符、子类型、精度、字段宽度、标志和数字标识符。

*   转换字符是所有六个字段中唯一的必填字段。
*   转换字符必须始终以%符号开头。
*   格式化运算符的字段之间不允许有空格字符。

**语法示例:**

![Formatting Text](../Images/856d8ab54c416e4d3d5cf89142fb791e.png)

### 转换字符

转换字符是唯一必需的字段，它指定输出的符号。转换字符由单个字母字符表示，在格式说明符中最后出现。

| Sl。号码 | 转换字符 | 描述 |
| **1。** | **c** | 单一字符 |
| **2。** | **d** | 十进制符号(有符号) |
| **3。** | **e** | 指数记数法(使用小写 e，如 3.1415e+00) |
| **4。** | **E** | 指数符号(使用大写的 E，如 3.1415E+00) |
| **5。** | **f** | 定点表示法 |
| **6。** | **g** | %e 或%f 越紧凑(不打印无关紧要的零) |
| **7。** | **G** | 类似于%g，但使用大写的 E |
| **8。** | **o** | 八进制符号(无符号) |
| **9。** | **s** | 字符向量或字符串数组 |
| **10。** | **u** | 十进制记数法(无符号) |
| **11 时。** | **x** | 十六进制表示法(无符号，使用小写字母 a-f) |
| **12 时。** | **X** | 十六进制表示法(无符号，使用小写字母 A-F) |

**示例:**

```

>>p=100;
>>ch = 'cdeEfgGosuxX';

>>res = sprintf("%c\t\t%c \n%c\t\t%d \n%c\t\t%e \n%c\t\t%E"+...
    "\n%c\t\t%f \n%c\t\t%g \n%c\t\t%G \n%c\t\t%o"+...
    "\n%c\t\t%s\n%c\t\t%u\n%c\t\t%x\n%c\t\t%X?, ...
    ch(1),p,ch(2),p,+ch(3),p,ch(4),p,ch(5),p,ch(6),+...
    p,ch(7),p,ch(8),p,ch(9),p,ch(10),p,ch(11),p,ch(12),p);

```

**输出:**

```
>> res
res = 

    "c		d 
     d		100 
     e		1.000000e+02 
     E		1.000000E+02
     f		100.000000 
     g		100 
     G		100 
     o		144
     s		d
     u		100
     x		64
     X		64"

```

### 图表类型

子类型字段由紧接在转换字符之前的单个字母字符表示。转换字符%o、%u、%x 和%X 将数据输入视为整数，没有子类型字段。因此，使用以下子类型说明符之一将数据输入视为浮点值，并将它们转换为八进制、十进制或十六进制表示。

| 子类型说明符 | 描述 |
| b | 将输入数据视为双精度浮点值，而不是无符号整数。 |
| t | 将输入数据视为单精度浮点值，而不是无符号整数。 |

**示例:**

```

>> p = 100;

>> res = sprintf('before using subtype:\t%u\nafter using subtype:\t%tu',p,p);

```

**输出:**

```
>> res

res =

    'before using subtype:	100
     after using subtype:	1120403456'

```

### 精确

精度字段由紧跟在句点(点)之后的非负整数表示。它与%f、%e 和%E 运算符一起使用，并指示小数点右边要显示的位数。

**示例:**

```

>> res = sprintf('output without and with precision field:\t%f\t%.2f\t%e\t%.2e',pi*30*ones(1,4));

```

**输出:**

```
>> res

res =

    'output without and with precision field:   94.247780  94.25  9.424778e+01  9.42e+01'

```

### 字段宽度

字段宽度是非负整数，有或没有小数点精度。由于精度字段指定小数点后的位数，因此字段宽度指定输出中应显示的字符总数。如果字段宽度大于输入数据中的字符数，则默认情况下，输出文本用空格字符填充。

**示例:**

```

>> res = sprintf('output without and with field width:\t|%x|\t|%15x|\t|%f|\t|%15f|',303.3*ones(1,4));

```

**输出:**

```
>> res
res =
   'output without and with field width:  |3.033000e+02|  |   3.033000e+02|	|303.300000|  |   303.300000|'

```

### 旗帜

标志字段控制输出的附加格式。用于标志的字符主要描述间距、填充和文本对齐。

| 标志字符 | 描述 | 例子 |
| **减号(-)** | 左对齐输出 | %-5.2d |
| **加加号(+)** | 如果输出是文本，则右对齐输出，如果是数字，则添加前导加号字符 | %+5.2d
%+5s |
| **空间** | 在输出前插入空格 | % 5.2f |
| **零(0)** | 用零而不是空格填充输出 | %05.2f |
| **井号(#)** | 英镑符号标志是一个特例，因为它与其他标志有些不同。它将选定的数字转换修改为:

*   Print 0, 0X or 0x prefix of %o, %x or %X operator.
*   The decimal point is printed even if the precision of the %f, %e or %E operator is 0.
*   It does not delete trailing zeros or decimal points of %g or %G operators.

 | %#5.0f |

**示例:-左右对齐:**

```

>> sprintf('right-justify:|%+12s|\nleft-justify:|%-12.2f|',"flags",10);

```

**输出:**

```
>> ans

ans =

    'right-justify:|       flags|
     left-justify:|10.00       |'

```

**示例:-用空格和零填充:**

```

>> b = sprintf('padding with space: |%10.2f|\n padding with zero: |%010.2f|',20,20);

```

**输出:**

```
>> b

b =

    'padding with space: |  20.00|
      padding with zero: |0000020.00|'

```

**示例:-磅符号:**

```

>> a=sprintf('%#.0f',10.00);

```

**输出:**

```
>> a

a =

    '10.'

```

### 标识符

像 **sprintf** 这样的输出函数以与输入参数相同的顺序打印输出。因此，使用标识符以自定义的指定顺序生成输出。标识符是整数值，紧接在%符号之后，后面是美元符号。

### 默认订单

**示例:**

```

>> t1 = sprintf('%s %s %s','1st','2nd','3rd');

```

**输出:**

```
>> t1

t1 =

    '1st 2nd 3rd'

```

### 使用标识符的自定义订单

**示例:**

```

>> t2 = sprintf('%3$s %1$s %2$s','1st','2nd','3rd');

```

**输出:**

```
>> t2

t2 =

    '3rd 1st 2nd'

```

### 在输出中显示特殊字符

特殊字符是为了服务于特定的目的，因此不能用作普通文本。要将特殊字符作为输出文本的一部分，请使用特定的字符序列。

| 特殊字符 | 字符序列 |
| **单引号** | '(单引号两次) |
|  | %% |
| **反斜杠** | \\ |
| **报警** | \a |
| **退格** | \b |
| **成型进料** | \f |
| **新增线路** | \n |
| **回车** | \r |
| **水平标签** | \t |
| **垂直标签** | \v |
| **表示十六进制数的 Unicode 数值，N** | \xN
示例:sprintf('\x6A ')返回字符' j ' |
| **八进制数的 Unicode 数值的表示，N** | \N
示例:sprintf(' 100 ')返回字符' @ ' |

### 设置字段宽度和精度的规则

格式化操作符遵循格式化输出文本的特定规则。字段宽度和精度定义了数字在输出中的显示方式。让我们用一个例子来说明:

![Formatting Text](../Images/4cd061ae2252e75f614492716a172460.png)

*   如果未指定精度，则默认值设置为 6。
*   如果精度 p 小于输入小数部分的位数，则小数点后只显示 p 位，输出值四舍五入。
*   如果精度 p 高于小数部分的位数，则小数部分显示为在 p 位数的右侧添加零。
*   如果未指定字段宽度 w，则默认值按 p+1+n 计算，n 是输入值整个部分的位数。
*   如果字段宽度 w 大于 p+1+n，则输出的整个部分用空格或零个附加字符填充到左边，计算为 w-(p+1+n)。

### 格式说明符之外的字段宽度和精度

要在格式说明符之外指定字段宽度和精度，请使用星号(*)代替格式运算符的字段宽度或精度字段。星号的位置应该与输入参数中指定字段的数字的位置相匹配。让我们用一个例子来理解:

**示例:**

```

>> t3 = sprintf('%*f  %.*f  %*.*f',10,123.456,3,10.2345,4,2,pi);

```

**输出:**

```
>> t3

t3 =

    ?123.456000 10.235  3.14?

```

### 上面例子的解释:

| 格式化运算符 | 描述 |
| % ***f** | 将字段宽度指定为以下输入参数，10。 |
| %. ***f** | 指定精度作为下一个输入参数，3。 |
| %*. ***f** | 将宽度和精度指定为下一个输入参数 4 和 2。 |

### 指定标识符代替字段宽度和精度

我们可以为字段宽度和精度指定带编号的标识符，标识符的值来自输入参数。

![Formatting Text](../Images/39ee1f15452ffe67d84b0d36912df63c.png)

**示例:**

```

>> t4 = sprintf('%1$*4$f  %2$.*5$f  %3$*6$.*7$f',123.456, 12.36587, 3.145678, 10, 4, 4, 2);

```

**输出:**

```
>>t4 =

    '123.456000  12.3659  3.14'

```

### 让我们来看看上面的例子:

| 格式化运算符 | 描述 |
| **%1$*4$f** | 1$指定第一个输入参数 123.456 作为值
*4$指定第四个输入参数 10 作为字段宽度 |
| **%2$。*5 美元** | 2$指定第二个输入参数 12.36587 作为值
。*5$指定第五个输入参数 4 作为精度 |
| **%3$*6$。*7$f** | 3$指定第三个输入参数 3.145678 作为值
*6$指定第六个输入参数 4 作为字段宽度
。*7$指定第七个输入参数 2 作为精度 |

* * *