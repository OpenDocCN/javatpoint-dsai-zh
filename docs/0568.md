# 序列发生器变换

> 原文:[https://www . javatpoint . com/sequence-generator-transformation](https://www.javatpoint.com/sequence-generator-transformation)

序列生成器是一个被动的连接转换，它生成数字序列值，如 1、2、3 等。它不影响输入行数。

序列生成器转换用于创建唯一的主键值并替换丢失的主键。

例如，如果我们想给源记录分配序列值，那么我们需要使用序列生成器。

序列发生器转换由两个输出端口组成。我们无法编辑或删除这些端口，例如:

1.  库莱瓦尔
2.  NEXTVAL(下一个)

### NEXTVAL(下一个)

NEXTVAL 端口用于通过将其连接到转换或目标来生成序列号。生成的序列号基于当前值和增量属性。

如果序列发生器没有配置为循环，则 NEXTVAL 端口使序列号达到设定的结束值。

我们可以将 NEXTVAL 端口连接到多个转换，为每一行生成唯一的值。

序列生成器转换同时创建一个数字块。如果使用了数字块，则生成下一个序列号块。

**例如**，我们可以将 NEXTVAL 连接到映射中的两个目标表，以创建唯一的主键值。

集成服务为第一个目标生成一个 1 到 10 的数字块。当第一个数字块已经被加载时，只有那时才会为第二个目标生成另一个数字块 11 到 20。

### 库莱瓦尔

CURRVAL 端口是 NEXTVAL 加上增量值。

我们只在 NEXTVAL 端口已经链接到下游转换时才连接 CURRVAL 端口。

如果我们合并 CURRVAL 端口而不连接 NEXTVAL 端口，集成服务会为每一行传递一个常量值。

当我们在序列生成器转换中组合 CURRVAL 端口时，集成服务在每个块中处理一行。

我们可以通过在映射中只连接 NEXTVAL 端口来优化性能。

**示例:**假设 STUD 将是一个源表。

在共享文件夹中创建目标 STUD_SEQ_GEN_EXAMPLE。结构与螺柱相同。向目标表中再添加两个端口 NEXT_VALUE 和 CURR_VALUE。

我们可以创建一个在单个映射中使用的序列生成器转换，或者一个在多个映射中使用的可重用序列生成器转换。

可重用的序列生成器转换在使用序列生成器转换实例的每个映射中维护序列的完整性。

### 序列发生器变换的性质

以下是配置序列数据对象和新序列的属性:

| 财产 | 描述 |
| 起始值 | 使用循环选项时，生成序列的起始值是集成服务。如果我们选择循环，当集成服务达到最终值时，它会循环回到该值。
默认值为 0。
最大值为 9，223，372，036，854，775，806。 |
| 最终值 | 集成服务生成的最大值。如果集成服务在会话期间达到此值，并且序列未配置为循环，则会话会失败。
最大值为 9，223，372，036，854，775，807。 |
| 增量值 | NEXTVAL 端口的两个连续值之间的差异。
默认值为 1。
并且必须是正整数。
最大值为 2，147，483，647。 |
| 循环 | 如果启用，集成服务将在序列范围内循环，并以起始值重新开始。
如果禁用，集成服务将在配置的结束值处停止序列。如果会话达到结束值并且仍有行要处理，集成服务将因溢出错误而失败。 |
| 重置 | 如果启用，当映射完全运行时，集成服务会将序列数据对象重置为起始值。如果禁用，集成服务将在映射运行结束后增加当前值，并在下一次映射运行中使用该值。
对于可重用序列生成器转换和使用可重用序列数据对象的不可重用序列生成器转换，此属性被禁用。 |
| 跟踪级别 | 集成服务写入映射日志的转换的详细程度。我们可以选择简洁、正常、详细的初始化或详细的数据。正常设置为默认级别。 |
| 维护行顺序 | 保持转换输入数据的行顺序。如果集成服务不应执行任何可能更改行顺序的优化，请选择此选项。 |

### 例子

在下面的示例中，我们将在以下步骤中生成序列号并存储在目标中，例如:

**第一步**:创建目标表。

**第二步**:导入 Informatica 中创建的表作为目标表。

**第三步**:新建映射，导入 STUD 源和 STUD_SEQUENCE 目标表。

**第 4 步**:在映射中创建新的变换，

1.  选择序列转换作为类型。
2.  输入转换名称，如 seq_stud。
3.  点击**创建**

**第五步**:将创建序列发生器变换，然后点击**完成**按钮。

**第 6 步**:将序列发生器的 NEXTVAL 列链接到目标表中的 SNO 列。

**第 7 步**:将源限定符转换中的其他列链接到目标表。

**第八步**:双击序列发生器打开属性窗口，然后

1.  选择属性选项卡。
2.  输入起始值=1 的属性，并将其他属性保留为默认值。
3.  点击**确定**

现在保存映射，并在创建会话和工作流后执行它。

目标中的 SNO 列将包含序列生成器转换生成的序列号。

* * *