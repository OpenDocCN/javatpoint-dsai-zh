# 集中位置元数据

> 原文:[https://www . javatpoint . com/talend-集中化-位置-元数据](https://www.javatpoint.com/talend-centralizing-positional-metadata)

在本节中，我们将学习如何在 Talend Studio 数据集成平台中集中文件位置元数据。

在本章继续之前，我们先了解一下为什么要使用位置文件。

为了读写位置文件的数据，我们需要集中元数据。

要描述**文件输入位置、文件输出位置、**和**文件输入位置**组件的属性，我们必须使用文件位置元数据。

要从头开始创建文件位置连接:

*   转到**存储库面板，**然后转到**元数据**。
*   之后，展开元数据，右键点击**文件位置**，在弹出菜单中选择**创建文件位置**选项，如下图所示:

**存储库→元数据→文件位置**

![Centralizing Positional Metadata](../Images/497ba8735a4a44961b1017bbf9f5d5a5.png)

#### 注意:要在我们的工作中使用集中式文件分隔，请转到必要组件的基本设置视图，其属性类型设置为打开文件元数据设置窗口的内置选项。

然后**新位置文件**窗口将打开，文件连接和模式定义分四步完成:

*   **定义常规属性**
*   **定义文件路径和格式**
*   **定义文件解析参数**
*   **检查和定制文件模式**

**步骤 1:定义一般属性**

在第一步中，我们将填写所有必要的详细信息，如**名称，**是必填字段，如果我们想更具体，请填写目的和描述字段。

我们还可以在**项目设置**对话框中管理存储库项目的**版本**和**状态**字段。

点击路径字段旁边的**选择**按钮，选择**文件位置**节点下的文件夹，保存我们新创建的文件连接。

#### 注意:如果我们正在编辑一个现有的连接，我们不能选择一个文件夹，但是我们可以随时将它拖放到一个新的文件夹中。

填写完所有通用属性的详细信息后，点击**下一步**按钮。

![Centralizing Positional Metadata](../Images/029975e8185a58f7c826cb78be64a898.png)

**第二步:定义文件路径和格式**

下一步，我们将点击**浏览**按钮，从本地系统中定位我们的文件。

例如，我们将从系统中选择**员工信息. txt** 文件。

*   选择与我们的**相关的**编码**类型和**格式**。txt**
*   为此，我们从给定的下拉列表中选择格式为**窗口**。
*   如果给定的下拉列表中没有合适的格式，请忽略它。

![Centralizing Positional Metadata](../Images/6e638160a5de13d0f085b27ef9dfd7d6.png)

*   我们有**文件查看器，**，它给出了文件加载的即时图片，它允许我们放置我们的位置标记，正如我们在下面的截图中看到的:

![Centralizing Positional Metadata](../Images/6234679499187dc91ee0e3512fac8bbe.png)

要定义“文件”列属性，请单击“文件”预览，并在标尺上设置标记，橙色箭头有助于我们更改位置。

如上图所示，**字段分隔符**和**标记位置**字段被自动填充。

**字段分隔符:**为了显示加载文件的列长度，使用了字段分隔符，它还显示了分隔符之间的字符数。

**[*]:** 星号符号代表该行剩余的所有字符，从上一个标记位置开始，我们也可以改变图形来正确识别列。

**标记器位置:**这个字段用来显示标尺上每个标记器的准确位置，我们也可以通过改变图形来准确识别位置。

要移动标记，请按住箭头并将其拖到新位置。

要移除标记，按住箭头并将其向标尺方向拖动，直到出现 **(x)** 图标。

*   之后，点击**下一步**按钮进行进一步处理。

**步骤 3:定义文件解析参数**

在这一步中，我们描述文件解析变量来正确恢复文件模式。

预览部分显示标记位置上的文件列。

![Centralizing Positional Metadata](../Images/74650c337378b7f3ca7f5f35bef23240.png)

*   在**文件设置区**我们可以设置**字段**和**行分隔符**，如下图截图所示:

![Centralizing Positional Metadata](../Images/3c1ee3e2736357013b6069c244f45794.png)

*   如果需要识别列长，可以在**字段分隔符**中修改图
*   如果我们文件的**行分隔符**不是标准 EOL【行尾】，我们可以从**行分隔符**下拉列表中选择**自定义字符串**，并将字符串写入**对应字符**
*   在**行跳过**部分，我们可以更改给定的参数，如**页眉**和**页脚**。
    *   如果我们的文件包含任何要从数据内容中排除的标题行，请选择“要跳过的行”部分区域中的**标题**复选框，并在相应字段中定义要忽略的行数。
    *   如果特定文件有页脚信息，则设置页脚行数，在**页脚**复选框中忽略。

![Centralizing Positional Metadata](../Images/27482b349382adb9e6e9fb647930fdab.png)

*   为了限制解析文件的范围，我们将在**行限制**部分选择**限制**复选框，并指定所需的行数，如上图所示:

![Centralizing Positional Metadata](../Images/ee80d9be51ef82bd0559f914022e5691.png)

要查看新的设置影响，请查看**文件查看**面板，并选中**将处理行设置为列名**框，将第一个解析的行转换为模式列的标签。

另外，请注意要跳过的标题**行数**增加了 1。

![Centralizing Positional Metadata](../Images/8d1eb360ac2e6d782c6cfd23b0dfb6f5.png)

要查看效果和结果视图，在查看器上，点击**刷新预览**按钮。

之后，点击**下一步**按钮。

**步骤 4:检查和定制文件模式**

在最后一步中，我们将检查并定制文件模式:

*   要自定义文件模式，请检查**类型**列中的数据类型是否正确，在模式部分的**描述中，我们可以修改实际文件中提到的列名。**
*   如果位置文件模式改变，则**猜测**按钮用于再次生成模式，并确保在定制模式时，“猜测”功能不能保留更改。
*   之后，点击**完成**按钮，如下图所示:

![Centralizing Positional Metadata](../Images/d50291fd493432ec8007657e47902ed6.png)

要在 Talend 工作室中查看新创建的元数据:

*   转到存储库面板，然后转到元数据。
*   之后，展开文件位置节点，如下图所示:

**存储库→元数据→文件位置→员工**

![Centralizing Positional Metadata](../Images/4ec1471a76949c409033bf5992765824.png)

要将元数据作为新组件或现有组件重用，只需将文件连接或模式从存储库的元数据节点拖放到设计工作区窗口。

要修改现有的文件连接:

*   转到**存储库面板**，然后转到**元数据节点**。
*   之后，展开**文件位置，**并右键单击模式，选择**编辑文件位置**，如下图所示:

![Centralizing Positional Metadata](../Images/17a3c6da7c866f052eec1a99eb83909c.png)

要向现有文件连接添加新模式，请执行以下操作:

*   转到**存储库面板**，右键单击**文件位置**。
*   从**元数据**的弹出菜单中选择**检索模式**，如下图所示:

![Centralizing Positional Metadata](../Images/617d2e1e021c8ea216dccd935c6a5bac.png)

* * *