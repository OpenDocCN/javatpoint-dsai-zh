# Tableau 中的数据聚合

> 原文:[https://www.javatpoint.com/data-aggregation-in-tableau](https://www.javatpoint.com/data-aggregation-in-tableau)

使用不同的聚合函数查看数值非常有用。Tableau 支持许多不同的聚合类型，例如:

*   总额
*   平均的
*   数数
*   区分计数
*   中位数
*   最低限度
*   最高的
*   变化
*   总体方差
*   标准偏差
*   总体标准偏差
*   属性
*   尺寸

在 Tableau 中，您可以创建聚合维度和度量。每当向视图中添加度量时，默认情况下都会对这些度量应用聚合。使用的聚合类型取决于视图的上下文。

如果您不熟悉数据库，请参考 Tableau 手册了解这些聚合类型的详细定义。默认情况下，您正在将字段添加到可视化中，然后它将被显示。

Tableau 允许您更改或变更特定视图的聚合级别。要更改默认聚合，请右键单击数据架内的该字段，并通过选择菜单选项(默认属性或聚合)来更改其默认值。

您还可以更改字段的聚合，以便在工作表中特定使用。

**例如:**通过右键单击 SUM(销售额)丸并选择 Measure(总和)菜单选项，您可以选择任何突出显示的聚合。

![Data Aggregation in Tableau](../Images/f0bbcb2717dc68caeea7f450a0f4109c.png)

上图中使用的数据源是 Excel 电子表格的数据摘录。请务必理解，如果您依赖于与 Excel 的直接连接，则中值和计数(不同)聚合将不可用。Access、Excel 和文本文件不支持这些聚合类型。Tableau 的提取引擎可以完成这项任务。

## 聚合度量

向视图添加度量时，Tableau 会自动聚合其值。平均值、总和和中值是常见的聚合函数。当前聚合在视图中看起来像度量名称的一部分。

**例如:** **Sales** 变成 **SUM (Sales)** ，每个度量都有一个默认的聚合，这个聚合是在连接到数据源时由 Tableau 设置的。您可以更改或查看度量的默认聚合。

*   只能对关系数据源使用 Tableau 聚合度量。
*   多维数据源包含已经聚合的数据源。
*   在 Tableau 中，多维数据源仅在窗口中受支持。

## 设置度量的默认聚合

您可以为任何度量设置默认聚合。它不是本身包含聚合的计算字段，例如 AVG([折扣])。默认聚合是汇总离散或连续字段的首选计算。当您自动将度量拖动到视图时，将使用默认聚合。

**更改默认聚合**

右键单击数据字段中的测量菜单选项，选择**默认属性**，然后选择**聚合**，然后选择其中一个聚合选项。

*   您不能为发布的数据源设置默认聚合。默认聚合仅在最初发布数据源时设置。

![Data Aggregation in Tableau](../Images/8fe19527bbff09f8d95e0b3deb6ccda0.png)

## 如何分解数据

向视图中添加度量时，聚合会自动应用于该度量。该默认值由**分析**菜单中的**聚集测量**设置控制。

如果希望在模型的最详细级别查看视图中的所有标记，可以分解视图。对数据进行分解意味着 Tableau 将为数据源每行中的每个数据值显示一个单独的标记。

### 视图中所有度量的分解

点击**分析**然后转到**聚集措施**选项。当选择**聚合度量**时，Tableau 将自动尝试在视图中聚合度量。意味着它将数据源中的单个行值收集到一个值中，该值根据视图中的详细程度进行调整。

可用于度量的不同聚合决定了单个值的收集方式:它们可以是平均值(AVG)、相加值(总和)或设置为单个行值的最小值(最小值)或最大值(最大值)。

![Data Aggregation in Tableau](../Images/f46be0838589ed135a63de7d63267c1f.png)

如果已经选择，请单击一次聚合度量以取消选择。然后，你可以看到变化。

![Data Aggregation in Tableau](../Images/b7253685bce57f8c2df9f92fc8505c07.png)

分解数据对于分析您希望在视图中独立使用的度量非常有用。

#### 注意:如果您的数据源非常大，那么，对数据进行分解会显著降低性能。

## 聚合维度

您可以在视图中将维度聚合为**最大**、**最小**、**计数**和**计数不同的**。当您聚合维度时，您必须创建一个新的临时度量值列，因此该维度具有度量值的特征。

![Data Aggregation in Tableau](../Images/9563afd3b75771d5036bf05824a3c2ab.png)

#### 注意: Count Distinct 聚合不支持使用继承连接的文本文件和微软 Excel 数据源。如果您连接到这些类型的数据源之一，则计数差异聚合不可用，它显示备注“需要提取”如果您将数据源保存为摘录，您将能够使用计数不同的聚合。

将维度视为属性的另一种方式。您可以通过从维的上下文菜单中选择属性来更改它。

**属性聚合有多种用途:**

*   当混合多个数据源时，它确保了一致的细节级别。
*   它提供了一种在计算需要聚合表达式的表计算时聚合维度的方法。
*   由于本地计算，它提高了查询性能。

**Tableau 使用下面给出的公式计算属性:**

```

If MIN (dimension) = MAX (dimension) then MIN (dimension) else "*" end 

```

*   从初始查询中检索数据后，在 Tableau 中计算这个给定的公式。
*   星号(*)是一种特殊类型空值的视觉指示器，当有多个值时出现。

![Data Aggregation in Tableau](../Images/e614a49adb7904ebbe31ddf30506e849.png)

以上是在表计算中使用属性的示例。此表显示了市场、市场规模、州和市场销售情况，即 SUM(销售额)。假设，您想根据每个州对市场的贡献来计算总销售额的百分比。当您在沿状态计算的表计算中添加一些合计百分比时，计算会在上图所示的黑色区域内进行，这只是因为维度的市场规模正在对数据进行分区。

将市场规模汇总为属性时，计算将在市场(东部)内进行，市场规模信息将用作显示中的标签。

![Data Aggregation in Tableau](../Images/d24bfbbbd8c1100c1392958a7ac33e93.png)

* * *